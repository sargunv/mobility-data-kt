name: Test Agent Setup

on:
    push:
        branches: [main]
        paths:
            - .github/workflows/copilot-setup-steps.yml
    pull_request:
        paths:
            - .github/workflows/copilot-setup-steps.yml

permissions:
    contents: read

jobs:
    copilot-setup-steps:
        runs-on: ubuntu-latest
        steps:
            - uses: nschloe/action-cached-lfs-checkout@v1
              with:
                  fetch-depth: 0
                  fetch-tags: true
            - uses: actions/setup-java@v5
              with:
                  distribution: temurin
                  java-version: 21
            - uses: extractions/setup-just@v3
            - run: pip install pre-commit
            - run: pre-commit install --install-hooks
            - run: ./gradlew tasks
